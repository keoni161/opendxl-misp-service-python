
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Configuration &#8212; MISP DXL Python Service 0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MISP Certificate Verification" href="mispcertverification.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mispcertverification.html" title="MISP Certificate Verification"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MISP DXL Python Service 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>The MISP DXL Python Service application requires a set of configuration files to operate.</p>
<p>This distribution contains a <code class="docutils literal notranslate"><span class="pre">config</span></code> sub-directory that includes the configuration files that must
be populated prior to running the application.</p>
<p>Each of these files are documented throughout the remainder of this page.</p>
<p>Application configuration directory:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span><span class="o">/</span>
    <span class="n">dxlclient</span><span class="o">.</span><span class="n">config</span>
    <span class="n">dxlmispservice</span><span class="o">.</span><span class="n">config</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">config</span> <span class="p">(</span><span class="n">optional</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="dxl-client-configuration-file-dxlclient-config">
<span id="dxl-client-config-file-label"></span><h2>DXL Client Configuration File (dxlclient.config)<a class="headerlink" href="#dxl-client-configuration-file-dxlclient-config" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The required <code class="docutils literal notranslate"><span class="pre">dxlclient.config</span></code> file is used to configure the DXL client that will connect to the DXL fabric.</p>
<p>The steps to populate this configuration file are the same as those documented in the <cite>OpenDXL Python
SDK</cite>, see the
<a class="reference external" href="https://opendxl.github.io/opendxl-client-python/pydoc/sampleconfig.html">OpenDXL Python SDK Samples Configuration</a>
page for more information.</p>
<p>The following is an example of a populated DXL client configuration file:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Certs</span><span class="p">]</span>
<span class="n">BrokerCertChain</span><span class="o">=</span><span class="n">c</span><span class="p">:</span>\\<span class="n">certificates</span>\\<span class="n">brokercerts</span><span class="o">.</span><span class="n">crt</span>
<span class="n">CertFile</span><span class="o">=</span><span class="n">c</span><span class="p">:</span>\\<span class="n">certificates</span>\\<span class="n">client</span><span class="o">.</span><span class="n">crt</span>
<span class="n">PrivateKey</span><span class="o">=</span><span class="n">c</span><span class="p">:</span>\\<span class="n">certificates</span>\\<span class="n">client</span><span class="o">.</span><span class="n">key</span>

<span class="p">[</span><span class="n">Brokers</span><span class="p">]</span>
<span class="p">{</span><span class="mi">5</span><span class="n">d73b77f</span><span class="o">-</span><span class="mi">8</span><span class="n">c4b</span><span class="o">-</span><span class="mi">4</span><span class="n">ae0</span><span class="o">-</span><span class="n">b437</span><span class="o">-</span><span class="n">febd12facfd4</span><span class="p">}</span><span class="o">=</span><span class="p">{</span><span class="mi">5</span><span class="n">d73b77f</span><span class="o">-</span><span class="mi">8</span><span class="n">c4b</span><span class="o">-</span><span class="mi">4</span><span class="n">ae0</span><span class="o">-</span><span class="n">b437</span><span class="o">-</span><span class="n">febd12facfd4</span><span class="p">};</span><span class="mi">8883</span><span class="p">;</span><span class="n">mybroker</span><span class="o">.</span><span class="n">mcafee</span><span class="o">.</span><span class="n">com</span><span class="p">;</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.12</span>
<span class="p">{</span><span class="mf">24397e4</span><span class="n">d</span><span class="o">-</span><span class="mi">645</span><span class="n">f</span><span class="o">-</span><span class="mi">4</span><span class="n">f2f</span><span class="o">-</span><span class="mi">974</span><span class="n">f</span><span class="o">-</span><span class="n">f98c55bdddf7</span><span class="p">}</span><span class="o">=</span><span class="p">{</span><span class="mf">24397e4</span><span class="n">d</span><span class="o">-</span><span class="mi">645</span><span class="n">f</span><span class="o">-</span><span class="mi">4</span><span class="n">f2f</span><span class="o">-</span><span class="mi">974</span><span class="n">f</span><span class="o">-</span><span class="n">f98c55bdddf7</span><span class="p">};</span><span class="mi">8883</span><span class="p">;</span><span class="n">mybroker2</span><span class="o">.</span><span class="n">mcafee</span><span class="o">.</span><span class="n">com</span><span class="p">;</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">1.13</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="misp-dxl-python-service-dxlmispservice-config">
<span id="dxl-service-config-file-label"></span><h2>MISP DXL Python Service (dxlmispservice.config)<a class="headerlink" href="#misp-dxl-python-service-dxlmispservice-config" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>The required <code class="docutils literal notranslate"><span class="pre">dxlmispservice.config</span></code> file is used to configure the application.</p>
<p>The following is an example of a populated application configuration file:</p>
<blockquote>
<div><div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[General]</span>
<span class="na">host</span><span class="o">=</span><span class="s">mispserver1</span>
<span class="na">apiKey</span><span class="o">=</span><span class="s">12345</span>
<span class="na">apiNames</span><span class="o">=</span><span class="s">new_event,search,add_internal_comment,tag,sighting</span>
<span class="na">verifyCertificate</span><span class="o">=</span><span class="s">yes</span>
<span class="na">verifyCertBundle</span><span class="o">=</span><span class="s">mispCA.crt</span>
<span class="na">zeroMqNotificationTopics</span><span class="o">=</span><span class="s">misp_json_event,misp_json_sighting</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>General</strong></p>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">[General]</span></code> section is used to specify the MISP server
configuration, MISP API methods which should be available to invoke via
DXL, and MISP ZeroMQ messages which should be forwarded on to the DXL
fabric.</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="7%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>host</td>
<td>yes</td>
<td>The MISP server hostname or IP address.</td>
</tr>
<tr class="row-odd"><td>serviceUniqueId</td>
<td>no</td>
<td><p class="first">An optional unique identifier used to identify the
opendxl-misp service on the DXL fabric. If set, this
unique identifier will be appended to the name of each event and request
topic used on the fabric. For example, if the serviceUniqueId is
set to <code class="docutils literal notranslate"><span class="pre">sample</span></code>, the request and event topic names would start with the
following, respectively:</p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/service/misp-api/sample/&lt;method&gt;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/event/zeromq-notifications/sample/&lt;zeromq-topic&gt;</span></code></p>
<p>If serviceUniqueId is not set, request and event topic names would not
include an id segment, for example:</p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/service/misp-api/&lt;method&gt;</span></code></p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/event/zeromq-notifications/&lt;zeromq-topic&gt;</span></code></p>
</td>
</tr>
<tr class="row-even"><td>apiNames</td>
<td>no</td>
<td><p class="first">The list of MISP APIs for which corresponding request topics should be exposed
to the DXL fabric, delimited by commas.</p>
<p>For example: <code class="docutils literal notranslate"><span class="pre">new_event,search,update</span></code></p>
<p>With this example and the <code class="docutils literal notranslate"><span class="pre">serviceUniqueId</span></code> setting set to
<code class="docutils literal notranslate"><span class="pre">sample</span></code>, the request topics exposed to the DXL fabric would be:</p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/service/misp-api/sample/new_event</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/service/misp-api/sample/search</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/service/misp-api/sample/update</span></code></p>
<p class="last">The complete list of available API method names and parameters is available
in the documentation for the pymisp.PyMISP class at
<a class="reference external" href="https://media.readthedocs.org/pdf/pymisp/latest/pymisp.pdf">https://media.readthedocs.org/pdf/pymisp/latest/pymisp.pdf</a>.</p>
</td>
</tr>
<tr class="row-odd"><td>apiKey</td>
<td>no</td>
<td><p class="first">The MISP server's API key. Note that this property is required if one or more <code class="docutils literal notranslate"><span class="pre">apiNames</span></code> is
specified.</p>
<p class="last">The API key is accessible from the MISP web server UI. Navigate to the <code class="docutils literal notranslate"><span class="pre">Automation</span></code> page under the
<code class="docutils literal notranslate"><span class="pre">Event</span> <span class="pre">Actions</span></code> menu. Copy the value which follows the text <code class="docutils literal notranslate"><span class="pre">Your</span> <span class="pre">current</span> <span class="pre">key</span> <span class="pre">is:</span></code> into this
property. For more information, see
<a class="reference external" href="https://misp.gitbooks.io/misp-book/content/automation/#automation-key">https://misp.gitbooks.io/misp-book/content/automation/#automation-key</a>.</p>
</td>
</tr>
<tr class="row-even"><td>apiPort</td>
<td>no</td>
<td>The MISP server's HTTP API port. Defaults to <code class="docutils literal notranslate"><span class="pre">443</span></code>.</td>
</tr>
<tr class="row-odd"><td>verifyCertificate</td>
<td>no</td>
<td>Whether to verify that MISP server's certificate was
signed by a valid certificate authority when SSL/TLS is being
used. Defaults to <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</td>
</tr>
<tr class="row-even"><td>verifyCertBundle</td>
<td>no</td>
<td>A path to a CA Bundle file containing certificates of trusted
CAs. The CA Bundle is used to ensure that the MISP
server being connected to was signed by a valid authority. Only
applicable if <code class="docutils literal notranslate"><span class="pre">verifyCertificate</span></code> is <code class="docutils literal notranslate"><span class="pre">yes</span></code>.</td>
</tr>
<tr class="row-odd"><td>clientCertificate</td>
<td>no</td>
<td>A path to a client certificate supplied to the MISP
server for TLS/SSL connections. Defaults to not using a client
certificate.</td>
</tr>
<tr class="row-even"><td>clientKey</td>
<td>no</td>
<td>A path to a client private key used for TLS/SSL connections made
to the MISP server. Defaults to not using a client
private key.</td>
</tr>
<tr class="row-odd"><td>zeroMqNotificationTopics</td>
<td>no</td>
<td><p class="first">The list of topics for MISP ZeroMQ messages which should be forwarded on to the DXL fabric.</p>
<p>For example: <code class="docutils literal notranslate"><span class="pre">misp_json_event,misp_json_sighting</span></code></p>
<p>With this example and the <code class="docutils literal notranslate"><span class="pre">serviceUniqueId</span></code> setting set to <code class="docutils literal notranslate"><span class="pre">sample</span></code>, any ZeroMQ message with a
topic of &quot;misp_json_event&quot; or &quot;misp_json_sighting&quot; would be forwarded as a DXL event with the
following topics, respectively:</p>
<p><code class="docutils literal notranslate"><span class="pre">/opendxl-misp/event/zeromq-notifications/sample/misp_json_event</span></code></p>
<p>The complete list of available MISP ZeroMQ messages is available at
<a class="reference external" href="https://misp.gitbooks.io/misp-book/content/misp-zmq/">https://misp.gitbooks.io/misp-book/content/misp-zmq/</a>.</p>
<p>If you intend to use the ZeroMQ notification functionality with the OpenDXL MISP Python service, you
will need to enable the ZeroMQ plugin in MISP. This step is needed to enable the DXL MISP service to be
able to receive event notification messages from the MISP ZeroMQ server.</p>
<p>From the MISP web server UI, do the following:</p>
<ul class="simple">
<li>Navigate to the <code class="docutils literal notranslate"><span class="pre">Server</span> <span class="pre">Settings</span> <span class="pre">&amp;</span> <span class="pre">Maintenance</span></code> page under the <code class="docutils literal notranslate"><span class="pre">Administration</span></code> menu.</li>
<li>Select the <code class="docutils literal notranslate"><span class="pre">Plugin</span> <span class="pre">Settings</span></code> tab.</li>
<li>Expand the <code class="docutils literal notranslate"><span class="pre">ZeroMQ</span></code> option in the plugin list.</li>
<li>Set the <code class="docutils literal notranslate"><span class="pre">Plugin.ZeroMQ_enable</span></code> setting to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
<li>Set the <code class="docutils literal notranslate"><span class="pre">Plugin.ZeroMQ_notifications_enable</span></code> settings to <code class="docutils literal notranslate"><span class="pre">true</span></code> for the corresponding topics
included in this setting. For example, for the topics <code class="docutils literal notranslate"><span class="pre">misp_json_event,misp_json_sighting</span></code>, the
<code class="docutils literal notranslate"><span class="pre">Plugin.ZeroMQ_event_notifications_enable</span></code> and <code class="docutils literal notranslate"><span class="pre">Plugin.ZeroMQ_sighting_notifications_enable</span></code>
settings would need to be set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</li>
</ul>
<p class="last">For more information, see the documentation for the
<a class="reference external" href="https://misp.gitbooks.io/misp-book/misp-zmq/#misp-zeromq-configuration">MISP ZeroMQ configuration</a>.</p>
</td>
</tr>
<tr class="row-even"><td>zeroMqPort</td>
<td>no</td>
<td>The MISP server's ZeroMQ notification port. Defaults to <code class="docutils literal notranslate"><span class="pre">50000</span></code>.</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="logging-file-logging-config">
<h2>Logging File (logging.config)<a class="headerlink" href="#logging-file-logging-config" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>The optional <code class="docutils literal notranslate"><span class="pre">logging.config</span></code> file is used to configure how the application writes log messages.</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#dxl-client-configuration-file-dxlclient-config">DXL Client Configuration File (dxlclient.config)</a></li>
<li><a class="reference internal" href="#misp-dxl-python-service-dxlmispservice-config">MISP DXL Python Service (dxlmispservice.config)</a></li>
<li><a class="reference internal" href="#logging-file-logging-config">Logging File (logging.config)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mispcertverification.html"
                        title="next chapter">MISP Certificate Verification</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/configuration.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mispcertverification.html" title="MISP Certificate Verification"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MISP DXL Python Service 0.1.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, McAfee LLC.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>